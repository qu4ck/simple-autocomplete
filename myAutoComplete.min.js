/**
  *                                  *
 *** Native Javascript Autocomplete ***
  *                                  *
  * Author : Airlangga bayu seto
  * Email  : qu4ck@iso.web.id
  * Version : 0.9 Beta
  *
 **/
var isoweb,getID,targetID;isoweb={autocomplete:function(option,callback){getID=document.getElementById(option.textID);targetID=document.getElementById(option.targetID);getID.onfocus=function(){getID.value=""};getID.setAttribute("autocomplete","off");getID.onkeyup=function(){var strValue=escape(getID.value);if(strValue.length>=option.minLength){var req=isoweb.checkAjax();req.open("GET",option.url+"?"+option.queryStr+"="+strValue,true);req.onreadystatechange=function(){if(req.readyState==4&&req.status==200){var data=eval("("+req.responseText+")");if(data.error==true){alert("Ajax tidak berjalan.")}else{if(data.result.length<1){getID.style.visibility="hidden"}else{targetID.className="suggestList";targetID.setAttribute("style","position:absolute;top:"+isoweb.getPosition.curTop+";left:"+isoweb.getPosition.curLeft+";");var html="";resultData=data.result;for(var k in data.result){html+='<div rel="'+k+'"                                     onmouseover="javascript:isoweb.mouseOver(this);"                                     onmouseout="javascript:isoweb.mouseOut(this);"                                     class="suggestData" id="suggestData'+k+'">'+data.result[k]["label"]+"</div>"}targetID.innerHTML=html;var className=isoweb.getClassName("suggestData");for(var i=0;i<className.length;i++){document.getElementById("suggestData"+i).onclick=function(){isoweb.clickData(data.result[this.getAttribute("rel")]["label"]);callback(data.result[this.getAttribute("rel")]);return false}}}}}};req.send()}}},getClassName:function(e){var t=[];var n=document.getElementsByTagName("*");for(var r=0;r<n.length;r++){if((" "+n[r].className+" ").indexOf(" "+e+" ")>-1)t.push(n[r])}return t},getPosition:function(){var e=getID;var t=0;if(getID.offsetParent){while(e.offsetParent){t+=e.offsetLeft;e=e.offsetParent}}var n=getID;var r=20;if(n.offsetParent){while(n.offsetParent){r+=n.offsetTop;n=n.offsetParent}}},clickData:function(e){getID.value=e;targetID.innerHTML="";targetID.style.visibility="hidden"},checkAjax:function(){if(window.XMLHttpRequest){return new XMLHttpRequest}else if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}else{alert("Browser tidak mendukung Ajax!");return false}},mouseOver:function(e){var t=e.className.match(new RegExp("(\\s|^)mouseOver(\\s|$)"));if(!t){e.className+=" mouseOver"}},mouseOut:function(e){var t=new RegExp("(\\s|^)mouseOver(\\s|$)");e.className=e.className.replace(t,"")},extend:function(e,t){for(var n in t){e[n]=t[n]}return e}}